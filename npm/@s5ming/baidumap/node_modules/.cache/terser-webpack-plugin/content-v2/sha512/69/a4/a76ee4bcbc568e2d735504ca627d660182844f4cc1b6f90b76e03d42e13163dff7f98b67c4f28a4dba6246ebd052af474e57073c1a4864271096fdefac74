{"code":"!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=1)}([function(t,e,n){var o;o=function(){function t(t){var e=t.trim(),n=e.length;return\"'\"==e[0]||'\"'==e[0]?e.substring(1,n-1):e}return function(e){var n=e.trim(),o=n.length,r=n[0],i=n[o-1];if(console.log(r,i),\"{\"!=r||\"}\"!=i)return console.error(e+\" 不是一个标准的json,{}大括号不完善\"),{error:\"不是一个标准的json\"};for(var a=n.substring(1,o-1),l={},s=a.split(\",\"),p=s.length,c=0;c<p;c++){var u=s[c].trim();if(u){var f=u.split(\":\");l[t(f[0])]=t(f[1])}}return l}}(),t.exports=o},function(t,e,n){\"use strict\";n.r(e);var o=function(t,e,n){var r=(n=n||{}).exclude||[],i=r.length,a={};for(var l in t)a[l]=t[l];for(var l in e){for(var s=!1,p=0;p<i;p++){r[p]==l&&(s=!0);break}s||(void 0===a[l]?a[l]=e[l]:a[l]&&a[l].constructor==Object&&\"[object Object]\"==a[l].toString()&&(a[l]=o(a[l],e[l])))}return a},r=o,i=(n(0),[\"normal\",\"light\",\"dark\",\"redalert\",\"googlelite\",\"grassgreen\",\"midnight\",\"pink\",\"darkgreen\",\"bluish\",\"grayscale\",\"hardedge\"]),a=i.length,l=function(t,e){var n;\"string\"!=typeof(n=\"number\"==typeof(e=e||0)?i[e%a]:e)?t.setMapStyle({styleJson:n}):t.setMapStyle({style:n})},s=function(t){if((t=r(t,{container:null,center:{lng:116.404,lat:39.915},zoom:12,currentcity:\"北京\",enableScrollWheelZoom:!0,navLoc:{x:0,y:20},style:0,load:null})).container){var e=!1,n=!1,o=setInterval(function(){!e&&$(\".anchorBL\").length&&($(\".anchorBL\").hide(),e=!0),!n&&$(\".BMap_cpyCtrl.BMap_noprint.anchorBL\").length&&($(\".BMap_cpyCtrl.BMap_noprint.anchorBL\").hide(),n=!0),e&&n&&clearInterval(o)},50),i=new BMap.Map(t.container);i.centerAndZoom(new BMap.Point(t.center.lng,t.center.lat),t.zoom),i.setCurrentCity(t.currentcity),i.enableScrollWheelZoom(t.enableScrollWheelZoom),l(i,t.style),t.minZoom&&i.setMinZoom(t.minZoom),t.maxZoom&&i.setMaxZoom(t.maxZoom);var a=!1;return i.addEventListener(\"tilesloaded\",function(){if(!a){if(a=!0,!t.removeNav){var e=new BMap.NavigationControl(i);i.addControl(e),e.setOffset(new BMap.Size(t.navLoc.x,t.navLoc.y))}t.load&&t.load(i)}}),i}console.error(\"请给mapInit方法一个container参数\")},p=function(t){this.opt=r(t||{},{point:new BMap.Point(116.404,39.915),offset:{x:10,y:10},zIndex:0,html:null}),this._div=document.createElement(\"div\")};(p.prototype=new BMap.Overlay).initialize=function(t){this._map=t;var e=this._div;return e.style.position=\"absolute\",e.style.zIndex=this.opt.zIndex||BMap.Overlay.getZIndex(this.opt.point.lat),this.setHTML(this.opt.html),this._map.getPanes().floatPane.appendChild(e),this.draw(),e},p.prototype.draw=function(){var t=this.opt.point,e=this._map,n=parseInt(this._div.offsetWidth),o=parseInt(this._div.offsetHeight),r=e.getSize(),i=parseInt(r.width),a=parseInt(r.height),l=e.pointToPixel(t),s=l.x,p=l.y,c=this.opt.offset.x,u=this.opt.offset.y;s+c+n>i&&(c=-c-n),p+u+o>a&&(u=a-o-4);var f=e.pointToOverlayPixel(t);this._div.style.left=f.x+c+\"px\",this._div.style.top=f.y+u+\"px\"},p.prototype.setHTML=function(t){var e;this.opt.html=t,\"string\"==typeof(e=\"function\"==typeof t?t():t)?this._div.innerHTML=e:this._div.appendChild(e)},p.prototype.setPoint=function(t){this.opt.point=t,this.draw()},p.prototype.show=function(){this._div.style.display=\"block\"},p.prototype.hide=function(){this._div.style.display=\"none\"};var c=function(t,e){if(t){e=this.opts=r(e,{type:\"rectangle\",drawEnd:function(t){},style:{strokeColor:\"red\",fillColor:\"red\",strokeWeight:1,strokeOpacity:.6,fillOpacity:.2,strokeStyle:\"solid\"}});this.drawingManager=new BMapLib.DrawingManager(t,{isOpen:!1,enableDrawingTool:!1,rectangleOptions:e.style});var n=this;this.drawingManager.addEventListener(\"overlaycomplete\",function(t){n.opts.drawEnd(t.overlay),n.close()})}};c.prototype.open=function(t){this.opts.type=t||this.opts.type,this.drawingManager.setDrawingMode(this.opts.type),this.drawingManager.open()},c.prototype.close=function(){this.drawingManager.close()};var u=(t,e)=>{if(e)if(\"number\"==typeof t)for(var n=0;n<t;n++)e&&e(n);else{var o=t.length;for(n=0;n<o;n++)e&&e(t[n],n)}};var f=function(t,e){e=r(e,{searchEnd:function(){console.log(\"searchend\")},setMarkerStyle:function(t){console.log(\"marker\",t)},setlineStyle:function(t){console.log(\"line\",t)},autoViewport:!0,policy:\"BMAP_DRIVING_POLICY_LEAST_TIME\"});this._driving=new BMap.DrivingRoute(t,{renderOptions:{map:t,autoViewport:e.autoViewport},policy:e.policy,onSearchComplete:function(t){e.searchEnd(t)},onPolylinesSet:function(t){var n=[];u(t,function(t){n.push(t.getPolyline())}),e.setlineStyle(n)},onMarkersSet:function(n){t.removeOverlay(n[0].marker),t.removeOverlay(n[1].marker),e.setMarkerStyle(n[0].point,n[1].point)}})};f.prototype.search=function(t,e){t=t||new BMap.Point(116.301934,39.977552),e=e||new BMap.Point(116.508328,39.919141);this._driving.search(t,e)};s({container:\"map_container\"})}]);","extractedComments":[]}