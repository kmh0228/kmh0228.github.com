<!doctype html>
<html>
<head>
<meta charset="utf-8">

<meta content="text/html; charset=utf-8" http-equiv="Content-Type">     
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">     
<meta content="yes" name="apple-mobile-web-app-capable">     
<meta content="black" name="apple-mobile-web-app-status-bar-style">     
<meta content="telephone=no" name="format-detection">

<title>kmh0228-calculator</title>
<script type="text/javascript" src="tools/Calculator.js"></script>
<script type="text/javascript" src="tools/isPC.js"></script>
<style>
*{ margin:0; padding:0;}
html,body{width:100%; height:100%;}
textarea{ width:100%; height:120px; max-width:300px; margin:5px auto; display:block; resize:none; border:1px solid #000;}
.aq{ width:100%; max-width:300px; border:1px solid transparent; overflow:hidden; margin:0 auto;}
.aq input{ width:16%; height:30px; text-align:center; line-height:30px; font-size:24px; float:left;}
.aq input.long{ width:18%;}
.eq{width:100%;  max-width:300px; margin:5px auto; overflow:hidden;}
.eq .a{ width:150px; height:30px; text-align:center; line-height:30px; font-size:24px;float:left;}
.eq .b,.eq span{ width:50px; height:30px; text-align:center; line-height:30px; font-size:14px;float:right;}
.eq span{ line-height:15px;  width:70px;}
p{ width:300px; margin:0 auto; line-height:24px; font-size:14px;}
p.info2 span{font-weight:bold; color:#f00;}
p.info1{ margin:5px auto; color:#006; font-weight:bold;}
p.info0{ margin:5px auto; color:#f00; font-weight:bold;}
</style>
</head>

<body>
    <textarea>998001</textarea>
    <div class="aq" id="aq">
		<input type="button" value="加"/>
		<input type="button" value="减"/>
		<input type="button" value="乘"/>
		<input type="button" value="除"/>
		<input class="long" type="button" value="次方"/>
		<input class="long" style="background:#3C6" type="button" value="开方"/>
    </div>
    <textarea>30000</textarea>
    <div class="eq">
        <input type="button" class="a" id="eq" value="开始计算"/><input id="fix" class="b" type="text" value="0"/><span>商/根的最大小数位:</span>
    </div>
    <textarea></textarea>
    <p class="info2" id="info2">当前计算结果长度为0 用时<span>0</span>秒</p>
    <p class="info0">话说，9位数是上亿，咳咳！低于900位数的不要找我算！太小！</p>
</body>
</html>
<script type="text/javascript">
var c=new Calculator();
var aQ=document.getElementById('aq').getElementsByTagName('input');
var textarea=document.getElementsByTagName('textarea');
var cur=5;
for(var i=0;i<aQ.length;i++){
	aQ[i].index=i;
	aQ[i].onclick=function(){
		aQ[cur].style.background='';
		this.style.background='#3c6';
		cur=this.index;
	}
}
var oInfo2=document.getElementById('info2');

var bOk=false;
var oFix=document.getElementById('fix');
document.getElementById('eq').onclick=function(){
	if(bOk)return;
	bOk=true;
	var time1=new Date().getTime();
	textarea[2].value='正在计算中，请稍等……';
	var a=textarea[0].value;
	var b=textarea[1].value;
	var result;
	switch(cur){
		case 0:
		result=c.plus(a,b);
		break;
		case 1:
		result=c.minus(a,b);
		break;
		case 2:
		result=c.multiply(a,b);
		break;
		case 3:
		result=c.divide(a,b,oFix.value);
		break;
		case 4:
		result=c.power(a,b);
		break;
		case 5:
		textarea[1].value='';
		result=c.sqr(a,oFix.value);
		break;
	}
	textarea[2].value=result;
	var time2=new Date().getTime();
	dtime=((time2-time1)/1000).toFixed(2);
	oInfo2.innerHTML='当前计算结果长度为'+textarea[2].value.length+' 用时<span>'+dtime+'</span>秒。';
	bOk=false;
}
</script>